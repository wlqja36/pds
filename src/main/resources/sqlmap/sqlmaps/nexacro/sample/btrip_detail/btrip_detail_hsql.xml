<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="btrip_detail">

   	<typeAlias  alias="searchVO" type="nexacro.sample.vo.DefaultVO"/>
    <typeAlias  alias="btrDetailVO" type="nexacro.sample.vo.btrip_detailVO.Btrip_detailVO"/>

    <resultMap id="btrdetail" class="btrdetailVO">
        <result property="btrip_Dno" column="BTRIP_DNO" />
        <result property="btrip_Dda" column="BTRIP_DDA" />
        <result property="detail" column="DETAIL" />
        <result property="ws_Date" column="WS_DATE" />
        <result property="wf_Date" column="WF_DATE" />
        <result property="hotel" column="HOTEL" />
        <result property="trans" column="TRANS" />
        <result property="visiter" column="VISITER" />
        <result property="tex_Expenses" column="TEX_EXPENSES" />
        <result property="remark" column="REMARK" />
    </resultMap>
    
     <select id="btrip_detail.selectbtrVOList" parameterClass="btrdetailVO" resultMap="btrdetail">

      <!--   SELECT
                BTRIP_DNO,
                B2.BTRIP_NO,
                B2.EMP_NO,
				BTRIP_DDA,	
				DETAIL,
				WS_DATE,	
				WF_DATE,
				HOTEL,
				TRANS,	
				VISITER,	
				TEX_EXPENSES,
				REMARK
            FROM BUSINESS_TRIP B1,
                 BTRIP_MANAGEMENT B2
            WHERE 
                BTRIP_DNO = B2.BTRIP_NO AND B2.EMP_NO =#searchKeyword# -->
            
            
            SELECT
                BTRIP_DNO,
				BTRIP_DDA,	
				DETAIL,
				WS_DATE,	
				WF_DATE,
				HOTEL,
				TRANS,	
				VISITER,	
				TEX_EXPENSES,
				REMARK
            FROM BUSINESS_TRIP             	 
            WHERE 
                BTRIP_DNO =#searchKeyword# 
            
    </select>
   

   
    <insert id="btrip_detail.insertbtrVOList" parameterClass="btrdetailVO">
        <![CDATA[
            INSERT INTO BUSINESS_TRIP (
				BTRIP_DNO,
				BTRIP_DDA,	
				DETAIL,
				WS_DATE,	
				WF_DATE,
				HOTEL,
				TRANS,	
				VISITER,	
				TEX_EXPENSES,
				REMARK
            ) VALUES (
            	#btrip_Dno#,
                TO_CHAR(SYSDATE, 'yyyymmdd') || LPAD(BUSINESS_TRIP_SEQ.NEXTVAL,4,0),
                #detail#,
                #ws_Date#,
                #wf_Date#,
                #hotel#,
                #trans#,
                #visiter#,
                #tex_Expenses#,
                #remark#
            )
        ]]>
    </insert>
    
      <update id="btrip_detail.updatebtrVOList" parameterClass="btrdetailVO">
        <![CDATA[
            UPDATE BUSINESS_TRIP 
            SET 
				DETAIL =#detail#,
				WS_DATE =#ws_Date#,	
				WF_DATE =#wf_Date#,
				
				HOTEL =#hotel#,       
				TRANS =#trans#,  
				VISITER =#visiter#,    
				TEX_EXPENSES =#tex_Expenses#,
				REMARK =#remark#
            WHERE BTRIP_DDA =#btrip_Dda#
        ]]>
    </update>
    
    <delete id="btrip_detail.deletebtrVOList" parameterClass="btrdetailVO">
        <![CDATA[
            DELETE FROM BUSINESS_TRIP 
            WHERE BTRIP_DDA=#btrip_Dda#
        ]]>
    </delete>
     
</sqlMap>
